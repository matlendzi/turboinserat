# Local development
http://turboinserat.localhost {
    # API reverse proxy
    handle_path /api/* {
        uri strip_prefix /api
        reverse_proxy backend:8000
    }

    # Static file serving
    handle /uploads/* {
        root * /uploads
        file_server
    }

    # Frontend reverse proxy
    handle {
        reverse_proxy frontend:3000
    }

    # Logging
    log {
        output file /var/log/caddy/access.log
        format json
    }
}

# Production server
turboinserat.kartenmitwirkung.de {
    # API reverse proxy
    handle_path /api/* {
        uri strip_prefix /api
        reverse_proxy backend:8000
    }

    # Static file serving
    handle /uploads/* {
        root * /uploads
        file_server
    }

    # Frontend reverse proxy
    handle {
        reverse_proxy frontend:3000
    }

    # Logging
    log {
        output file /var/log/caddy/access.log
        format json
    }
} 